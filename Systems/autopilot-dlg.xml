<?xml version="1.0" encoding="UTF-8" ?>

<!-- Boeing 757-200 Autopilot Configuration Dialog -->

<PropertyList>

	<name>autopilot</name>
	<layout>vbox</layout>

	<text>
		<label>Autopilot Settings</label>
	</text>

	<hrule />

	<group>
		<layout>hbox</layout>

		<checkbox>
			<label>F/D on</label>
			<property>autopilot/settings/flight-director</property>
			<live type="bool">true</live>
			<binding>
				<command>dialog-apply</command>
			</binding>
		</checkbox>
		<checkbox>
			<label>A/T on</label>
			<property>autopilot/settings/autothrottle</property>
			<live type="bool">true</live>
			<binding>
				<command>dialog-apply</command>
			</binding>
		</checkbox>
		<checkbox>
			<label>A/P on</label>
			<property>autopilot/settings/engaged</property>
			<live type="bool">true</live>
			<binding>
				<command>dialog-apply</command>
			</binding>
		</checkbox>
	</group>

	<group>
		<layout>vbox</layout>

		<hrule />

		<text>
			<label>Autothrottle</label>
		</text>

		<group>
			<layout>hbox</layout>

			<button>
				<legend>Switch</legend>
				<binding>
					<command>dialog-apply</command>
				</binding>
				<binding>
					<command>property-cycle</command>
					<property>autopilot/settings/speed-mode</property>
					<value>knots</value>
					<value>mach</value>
				</binding>
			</button>
			<text>
				<label>[IAS]</label>
				<visible>
					<equals>
						<property>autopilot/settings/speed-mode</property>
						<value>knots</value>
					</equals>
				</visible>
			</text>
			<text>
				<label>[Mach]</label>
				<visible>
					<equals>
						<property>autopilot/settings/speed-mode</property>
						<value>mach</value>
					</equals>
				</visible>
			</text>
		</group>

		<group>
			<layout>table</layout>

			<text>
				<row>0</row>
				<col>0</col>
				<label>IAS:</label>
			</text>

			<input>
				<row>0</row>
				<col>1</col>
				<property>autopilot/settings/target-speed-kt</property>
				<live type="bool">true</live>
				<binding>
					<command>dialog-apply</command>
				</binding>
			</input>

			<text>
				<row>1</row>
				<col>0</col>
				<label>Mach:</label>
			</text>

			<input>
				<row>1</row>
				<col>1</col>
				<property>autopilot/settings/target-speed-mach</property>
				<live type="bool">true</live>
				<binding>
					<command>dialog-apply</command>
				</binding>
			</input>
		</group>

		<group>
			<layout>hbox</layout>

			<button>
				<legend>SPD</legend>
				<binding>
					<command>dialog-apply</command>
				</binding>
				<binding>
					<command>nasal</command>
					<script>
					 var node = props.globals.getNode("/autopilot/settings/speed", 1);
					 if (node.getValue() == "speed-with-throttle")
					  {
					  node.setValue("");
					  }
					 else
					  {
					  node.setValue("speed-with-throttle");
					  }
					</script>
				</binding>
			</button>
			<button>
				<legend>TO/GA</legend>
				<binding>
					<command>dialog-apply</command>
				</binding>
				<binding>
					<command>nasal</command>
					<script>
					 var node = props.globals.getNode("/autopilot/settings/speed", 1);
					 if (node.getValue() == "speed-to-ga")
					  {
					  node.setValue("");
					  }
					 else
					  {
					  node.setValue("speed-to-ga");
					  }
					</script>
				</binding>
			</button>
		</group>

		<hrule />

		<text>
			<label>Heading</label>
		</text>

		<group>
			<layout>table</layout>

			<text>
				<row>0</row>
				<col>0</col>
				<label>HDG:</label>
			</text>

			<input>
				<row>0</row>
				<col>1</col>
				<property>autopilot/settings/heading-bug-deg</property>
				<live type="bool">true</live>
				<binding>
					<command>dialog-apply</command>
				</binding>
			</input>
		</group>

		<group>
			<layout>hbox</layout>

			<button>
				<legend>HDG</legend>
				<binding>
					<command>dialog-apply</command>
				</binding>
				<binding>
					<command>nasal</command>
					<script>
					 var node = props.globals.getNode("/autopilot/settings/heading", 1);
					 if (node.getValue() == "dg-heading-hold")
					  {
					  node.setValue("");
					  }
					 else
					  {
					  node.setValue("dg-heading-hold");
					  }
					</script>
				</binding>
			</button>
			<button>
				<legend>LOC</legend>
				<binding>
					<command>dialog-apply</command>
				</binding>
				<binding>
					<command>nasal</command>
					<script>
					 var node = props.globals.getNode("/autopilot/settings/heading", 1);
					 if (node.getValue() == "nav1-hold")
					  {
					  node.setValue("");
					  }
					 else
					  {
					  node.setValue("nav1-hold");
					  }
					</script>
				</binding>
			</button>
			<button>
				<legend>LNAV</legend>
				<binding>
					<command>dialog-apply</command>
				</binding>
				<binding>
					<command>nasal</command>
					<script>
					 var node = props.globals.getNode("/autopilot/settings/heading", 1);
					 if (node.getValue() == "true-heading-hold")
					  {
					  node.setValue("");
					  }
					 else
					  {
					  node.setValue("true-heading-hold");
					  }
					</script>
				</binding>
			</button>
		</group>

		<hrule />

		<text>
			<label>Pitch</label>
		</text>

		<group>
			<layout>table</layout>

			<text>
				<row>0</row>
				<col>0</col>
				<label>ALT:</label>
			</text>

			<input>
				<row>0</row>
				<col>1</col>
				<property>autopilot/settings/altitude-setting-ft</property>
				<live type="bool">true</live>
				<binding>
					<command>dialog-apply</command>
				</binding>
			</input>

			<text>
				<row>1</row>
				<col>0</col>
				<label>VS:</label>
			</text>

			<input>
				<row>1</row>
				<col>1</col>
				<property>autopilot/settings/vertical-speed-fpm</property>
				<live type="bool">true</live>
				<binding>
					<command>dialog-apply</command>
				</binding>
			</input>
		</group>

		<group>
			<layout>hbox</layout>

			<button>
				<legend>VNAV</legend>
				<binding>
					<command>dialog-apply</command>
				</binding>
				<binding>
					<command>nasal</command>
					<script>
					 var node = props.globals.getNode("/autopilot/settings/altitude", 1);
					 if (node.getValue() == "vnav")
					  {
					  node.setValue("");
					  }
					 else
					  {
					  node.setValue("vnav");
					  }
					</script>
				</binding>
			</button>
			<button>
				<legend>ALT</legend>
				<binding>
					<command>dialog-apply</command>
				</binding>
				<binding>
					<command>nasal</command>
					<script>
					 var node = props.globals.getNode("/autopilot/settings/altitude", 1);
					 if (node.getValue() == "altitude-hold")
					  {
					  node.setValue("");
					  }
					 else
					  {
					  node.setValue("altitude-hold");
					  }
					</script>
				</binding>
			</button>
			<button>
				<legend>VS</legend>
				<binding>
					<command>dialog-apply</command>
				</binding>
				<binding>
					<command>nasal</command>
					<script>
					 var node = props.globals.getNode("/autopilot/settings/altitude", 1);
					 if (node.getValue() == "vertical-speed-hold")
					  {
					  node.setValue("");
					  }
					 else
					  {
					  node.setValue("vertical-speed-hold");
					  }
					</script>
				</binding>
			</button>
			<button>
				<legend>APP</legend>
				<binding>
					<command>dialog-apply</command>
				</binding>
				<binding>
					<command>nasal</command>
					<script>
					 var hdgNode = props.globals.getNode("/autopilot/settings/heading", 1);
					 var altNode = props.globals.getNode("/autopilot/settings/altitude", 1);

					 if (altNode.getValue() == "gs1-hold")
					  {
					  hdgNode.setValue("");
					  altNode.setValue("");
					  }
					 else
					  {
					  hdgNode.setValue("nav1-hold");
					  altNode.setValue("gs1-hold");
					  }
					</script>
				</binding>
			</button>
		</group>

		<hrule />

		<button>
			<legend>Close</legend>
			<binding>
				<command>dialog-apply</command>
			</binding>
			<binding>
				<command>dialog-close</command>
			</binding>
		</button>
	</group>

</PropertyList>
